<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Loan EMI Calculator</title>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #fff9c4; /* light yellow */
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    min-height: 100vh;
  }
  .emi-calculator {
    background: #2196f3; /* blue */
    padding: 20px;
    border-radius: 15px;
    max-width: 450px;
    width: 90%;
    box-shadow: 0 6px 15px rgba(0,0,0,0.2);
    text-align: center;
    color: #fff;
  }
  h2 {
    margin-bottom: 20px;
    font-size: 1.6rem;
  }
  label {
    display: block;
    margin: 10px 0 5px;
    font-weight: bold;
    text-align: left;
  }
  input, select {
    padding: 10px;
    font-size: 1rem;
    border: none;
    border-radius: 10px;
    margin-bottom: 15px;
    width: 100%;
    outline: none;
  }
  .result {
    margin-top: 15px;
    background: #fff;
    color: #000;
    padding: 15px;
    border-radius: 10px;
    font-size: 1rem;
    font-weight: bold;
    text-align: left;
  }
  .highlight {
    color: #2196f3;
    font-size: 1.2rem;
  }
  canvas {
    margin-top: 20px;
    max-width: 100%;
  }
  @media(max-width:500px) {
    .emi-calculator { padding: 15px; }
    h2 { font-size: 1.3rem; }
    .result { font-size: 0.9rem; }
  }
</style>
</head>
<body>

<div class="emi-calculator">
  <h2>Loan EMI Calculator</h2>

  <label for="amount">Loan Amount (₹)</label>
  <input type="number" id="amount" placeholder="Enter loan amount">

  <label for="rate">Interest Rate (% per annum)</label>
  <input type="number" step="0.01" id="rate" placeholder="Enter annual rate">

  <label for="tenure">Loan Tenure</label>
  <input type="number" id="tenure" placeholder="Enter tenure">

  <label for="tenureType">Tenure Type</label>
  <select id="tenureType">
    <option value="years">Years</option>
    <option value="months">Months</option>
  </select>

  <div class="result" id="result">
    Enter details to calculate your EMI
  </div>

  <canvas id="emiChart"></canvas>
</div>

<script>
let emiChart;

function calculateEMI() {
  const amount = parseFloat(document.getElementById("amount").value);
  const rate = parseFloat(document.getElementById("rate").value);
  const tenure = parseInt(document.getElementById("tenure").value);
  const tenureType = document.getElementById("tenureType").value;
  const resultDiv = document.getElementById("result");

  if (isNaN(amount) || isNaN(rate) || isNaN(tenure) || amount <= 0 || rate <= 0 || tenure <= 0) {
    resultDiv.innerText = "⚠️ Please enter valid loan details.";
    if (emiChart) emiChart.destroy();
    return;
  }

  let months = tenureType === "years" ? tenure * 12 : tenure;
  let monthlyRate = rate / 12 / 100;

  // EMI formula
  let emi = (amount * monthlyRate * Math.pow(1 + monthlyRate, months)) / (Math.pow(1 + monthlyRate, months) - 1);
  let totalPayment = emi * months;
  let totalInterest = totalPayment - amount;

  resultDiv.innerHTML = `
    <p><strong>Monthly EMI:</strong> <span class="highlight">₹${emi.toFixed(2)}</span></p>
    <p><strong>Total Interest Payable:</strong> ₹${totalInterest.toFixed(2)}</p>
    <p><strong>Total Payment (Principal + Interest):</strong> ₹${totalPayment.toFixed(2)}</p>
  `;

  // Chart.js Pie Chart
  const ctx = document.getElementById('emiChart').getContext('2d');
  if (emiChart) emiChart.destroy(); // prevent duplicate chart

  emiChart = new Chart(ctx, {
    type: 'pie',
    data: {
      labels: ['Principal Amount', 'Total Interest'],
      datasets: [{
        data: [amount, totalInterest],
        backgroundColor: ['#ffeb3b', '#f44336'],
        borderColor: ['#fff', '#fff'],
        borderWidth: 2
      }]
    },
    options: {
      responsive: true,
      plugins: {
        legend: {
          position: 'bottom',
          labels: { color: '#fff' }
        }
      }
    }
  });
}

// Real-time calculation
document.getElementById("amount").addEventListener("input", calculateEMI);
document.getElementById("rate").addEventListener("input", calculateEMI);
document.getElementById("tenure").addEventListener("input", calculateEMI);
document.getElementById("tenureType").addEventListener("change", calculateEMI);
</script>

</body>
</html>
